<template>
    <div class="many_saitbar">
        <div class="left_saitbar">
            <div class="header">
                <p>Setting</p>
                <img src="/static/img/ls/free-icon-gear-interface-symbol-for-configuration-45493 1.png" alt="">
            </div>
            <div class="categ">
                <ul>
                    <li><button class="edit_profile">Edit Profile</button></li>
                </ul>
            </div>
        </div>
        <div class="polosa"></div>
        <div class="right_saitbar">
            <div class="person_info" style="margin-right: 260px;">
                <div class="div_person_logo">
                    <img :src="posts.avatar" alt="" class="person_logo">
                </div>
                <div class="div_person_p">
                    <p id="one">{{posts.login}}</p>
                    <p id="two">Change your profile photo</p>
                </div>
            </div>
            <div class="config_person">
                <h4>Account Management</h4>
                <p>Make changes to your email address, password, and account type. This information is confidential
                    and will not be displayed in your public profile.</p>
            </div>
            <div class="input_req">
                <div class="username" id="div_input">
                    <p id="username_p" class="p_any">Login</p>
                    <input type="text" id="username" class="input_any" :placeholder="posts.login" v-model="loginin">
                </div>
                <div class="name" id="div_input">
                    <p id="name_p" class="p_any">Name Surname</p>
                    <input type="text" id="name" class="input_any" :placeholder="posts.name_surname" v-model="name_surnamein">
                </div>
                <div class="aboutme" id="div_input">
                    <p id="aboutme_p" class="p_any">About me</p>
                    <textarea id="aboutme" class="input_any" maxlength="160" style="height: 100px; max-width: 200px; max-height: 100px; min-width: 200px; min-height: 100px;" :placeholder="posts.about_me" v-model="about_mein"></textarea>
                </div>
                <div class="Surrname" id="div_input">
                    <p id="Surname_p" class="p_any">Mobile number</p>
                    <input type="text" id="Surname" class="input_any" :placeholder="posts.phone" v-model="phonein">
                </div>
                <div class="email" id="div_input">
                    <p id="Surname_p" class="p_any">Email</p>
                    <input type="text" id="Surname" class="input_any" :placeholder="posts.email" v-model="emailin">
                </div>
                <div class="btn_preset">
                    <button style="margin-right: 20px;" @click="send_settings">Save</button>
                    <button>Reset</button>
                </div>
            </div>
        </div>
    </div>
</template>

<style>
@font-face {
    font-family: 'Montserrat';
    src: url(http://127.0.0.1:8000/font-family/Montserrat-Light.ttf);
}
@font-face {
    font-family: 'Montserrat_Black';
    src: url(http://127.0.0.1:8000/font-family/Montserrat-Bold.ttf);
}
@font-face {
    font-family: 'Montserrat_normal';
    src: url(http://127.0.0.1:8000/font-family/Montserrat-SemiBold.ttf);
}
@font-face {
    font-family: 'Leto';
    src: url(http://127.0.0.1:8000/font-family//Leto/Leto\ Text\ Sans\ Defect.otf);
}
@font-face {
    font-family: 'Montserrat';
    src: url(http://127.0.0.1:8000/font-family/Montserrat-Light.ttf);
}
@font-face {
    font-family: 'Montserrat_Black';
    src: url(http://127.0.0.1:8000/font-family/Montserrat-Bold.ttf);
}
@font-face {
    font-family: 'Montserrat_BlackExtra';
    src: url(http://127.0.0.1:8000/font-family/Montserrat-ExtraBold.ttf);
}

@font-face {
    font-family: 'Montserrat_normal';
    src: url(http://127.0.0.1:8000/font-family/Montserrat-SemiBold.ttf);
}
@font-face {
    font-family: 'Leto';
    src: url(http://127.0.0.1:8000/font-family//Leto/Leto\ Text\ Sans\ Defect.otf);
}

main {
    margin: 0 auto;
    width: 640px;
    height: 100%;
    box-shadow: 0px 10px 50px 5px rgba(0, 0, 0, 0.2);
    border-radius: 30px;
    margin-bottom: 16px;
}

.many_saitbar {
    display: flex;
    justify-content: space-between;
    padding-bottom: 10px;
}

.left_saitbar {
    width: 167px;
    height: 100%;
}

.polosa {
    width: 1px;
    background-color: #D9D9D9;
}

.right_saitbar {
    width: 472px;
    height: 100%;
}

.header {
    display: flex;
    justify-content: left;
    align-items: center;
}

.header p{
    font-family: "Montserrat_BlackExtra";
    font-size: 20px;
    color: #000000;
    padding: 20px 5px 0px 20px;
    margin: 0px;
}

.header img {
    padding-top: 20px;
    width: 15px;
    height: 15px;
}

.categ {
    width: 132px;
    height: 100%;
    margin: 15px 0px 0px 36px;
}

.edit_profile {
    font-family: 'Montserrat_normal';
    font-size: 17px;
    color: #000000;
    border: none;
    background: none;
    border-bottom: 1px solid #000;
    padding: 0px;
}

ul {
    padding: 0px;
    margin: 0px;
}

li {
    list-style-type: none;
}

.person_info img {
    width: 32px;
    height: 32px;
}

.div_person_logo{
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: radial-gradient(#FF6868 90%, #FFC700 90%,#FF0099 90%,#FF7A00 90%);
    display: flex;
    align-items: center;
}

.person_logo {
    width: 85px;
    height: 85px;
    align-items: center;
    margin: 0 auto;
    border-radius: 50%;
    background: radial-gradient(#FF6868, #FFC700,#FF0099,#FF7A00);
}

.person_info {
    display: flex;
    margin: 36px 0px 0px 51px;
}

.div_person_p {
    padding-left: 10px;
}

.div_person_p p {
    margin: 0px;
}

#one {
    font-family: "Leto";
    font-size: 15px;
    background: linear-gradient(180deg, #FF0000 0%, #FF0000 0.01%, #EBFF00 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    padding-top: 6px;
    height: 17px;
}

#two {
    font-family: "Leto";
    font-size: 9px;
    color: #A6A6A6;
}

.config_person {
    padding-left: 51px;
    padding-top: 15px;
}

.config_person h4{
    margin: 0px;
    font-family: "Montserrat_BlackExtra";
    font-size: 13px;
    color: #000000;
}

.config_person p{
    padding-top: 2px;
    margin: 0px;
    font-family: "Montserrat_normal";
    font-size: 9px;
    color: #000000;
    width: 310px;
    height: 33px;
}

.input_req {
    margin-left: 161px;
    margin-top: 22px;
    margin-bottom: 15px;
}

#div_input {
    padding-bottom: 10px;
}

.p_any {
    font-family: "Leto";
    font-size: 11px;
    color: #A6A6A6;
    margin: 0px;
    padding: 0px;
}

.input_any {
    width: 200px;
    height: 30px;
    background: #FFFFFF;
    border: 1px solid #000000;
    border-radius: 10px;
}

.btn_preset button {
    font-family: "Montserrat_normal";
    width: 90px;
    height: 25px;
    background: #FF4848;
    border: none;
    border-radius: 10px;
    font-size: 11px;
    color: #FFFFFF;
}
</style>

<script>
import axios from 'axios'

const addr = 'http://127.0.0.1:8000'
/*eslint-disable */
function getCookie (namer) {
  const matches = document.cookie.match(new RegExp(
    '(?:^|; )' + namer.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + '=([^;]*)'
  ))
  return matches ? decodeURIComponent(matches[1]) : undefined
}
/* eslint-enable */

export default {
  data: () => ({
    posts: {},
    errors: [],
    account: getCookie('login'),
    loginin: '',
    phonein: '',
    about_mein: '',
    name_surnamein: '',
    emailin: ''
  }),
  created () {
    console.log(123)
    axios
      .post(
        addr + '/check_ses',
        {
          user_sid: getCookie('user_sid')
        },
        {
          withCredentials: true
        }
      )
      .then((response) => {
        console.log(response)
        if (String(response.data) === 'false') {
          location.href = '/login'
        }
      })
      .catch((e) => {
        console.log(e)
      })
    axios
      .post(
        addr + '/settget',
        {
          login: getCookie('login')
        },
        {
          withCredentials: true
        }
      )
      .then((response) => {
        this.posts = response.data
      })
      .catch((e) => {
        console.log(e)
      })
  },
  methods: {
    send_settings () {
      axios
        .post(
          addr + '/settup',
          {
            login: this.loginin,
            phone: this.phonein,
            about_me: this.about_mein,
            name_surname: this.name_surnamein,
            email: this.emailin
          },
          {
            withCredentials: true
          }
        )
        .then((response) => {
          if (String(response.data) === 'true') {
            document.cookie = 'login=' + this.loginin
          }
        })
        .catch((e) => {
          console.log(e)
        })
    }
  }

}
</script>
